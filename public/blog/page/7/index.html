
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Naildrivin' &#10106;</title>
  <meta name="author" content="David Bryant Copeland">

  
  <meta name="description" content="Thought I&#8217;d post the slides of a talk I gave at work on Scala. We&#8217;re primarily a Java shop, and every week we do either a code review or &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.naildrivin5.com/blog/page/7/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Naildrivin' &#10106;" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-10518541-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <meta name="google-site-verification" content="h_yTpXa6N3ebHj8DYmgX4lIFGHBW1NtGMVHfXuu7i_4" />
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Naildrivin' &#10106;</a></h1>
  
    <h2>&#10144; Website of David Bryant Copeland</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.naildrivin5.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="http://www.awesomecommandlineapps.com">My Book!</a></li>
  <li><a href="/scalatour">Scala Tour</a></li>
  <li><a href="/talks">Talks</a></li>
  <li><a href="/blog/archives">Blog Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/08/17/intro-to-scala-for-java-developers-slides.html">Intro to Scala for Java Developers - Slides</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-17T00:00:00-04:00" pubdate data-updated="true">Aug 17<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Thought I&#8217;d post the slides of a talk I gave at work on Scala.  We&#8217;re primarily a Java shop, and every week we do either a code review or a tech-related presentation.
</p>
<p>
Our domain at work is analyzing residential energy data, so the examples herein are tailored to that:
</p>
<ul>
<li> <b>Read</b> or <b>Meter Read</b> - Some amount of energy used over a period, e.g. &#8220;100kwh in the month of June&#8221;</li>
<li> <b>Service Point</b> - meta-data about an electric meter (the &#8220;point&#8221; at which &#8220;service&#8221; is available).
</ul>
<p>
I also omitted a code demo where I refactored part of our codebase into Scala to show the difference (trust me, it was awesome!).
</p>
<!--
<div style="width:425px;text-align:left" id="__ss_1856620"><a style="font:14px Helvetica,Arial,Sans-serif;display:block;margin:12px 0 3px 0;text-decoration:underline;" href="http://www.slideshare.net/davetron5000/scala-for-java-developers-intro" title="Scala for Java Developers - Intro">Scala for Java Developers - Intro</a>
    &#8211;>
    <object style="margin:0px"><!-- width="425" height="355"> &#8211;><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=scala-090813141457-phpapp02&stripped_title=scala-for-java-developers-intro" /><param name="allowFullScreen" value="true"/><param name="allowScriptAccess" value="always"/><embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=scala-090813141457-phpapp02&stripped_title=scala-for-java-developers-intro" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed></object>
    <!--
    <div style="font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px;">View more <a style="text-decoration:underline;" href="http://www.slideshare.net/">documents</a> from <a style="text-decoration:underline;" href="http://www.slideshare.net/davetron5000">David Copeland</a>.</div></div>
&#8211;>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/29/simple-metrics-for-team-and-process-improvement.html">Simple Metrics for Team and Process Improvement</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-29T00:00:00-04:00" pubdate data-updated="true">Jun 29<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently, the development team where I work has started collecting bona-fide metrics, based on our ticketing system.  So few development shops (especially small ones) collect real information on how they work that it&#8217;s exciting that we&#8217;re doing it.
<p>
<p>
Here&#8217;s what we&#8217;re doing:
<ul>
<li><b>Number of releases during QA</b> (we do a daily release, so more than daily is an indicator)</li>
<li><b>Defects found, by severity and priority</b></li>
<li><b>Average time from accepting a ticket (starting work) to resolving it (sending it for testing)</b></li>
<li><b>Number of re-opens</b> (i.e. a defect was sent to testing, but not fixed)</li>
<li><b>Average time from resolving to closing</b> (i.e. testing the fix)</li>
<li><b>Defects due to coding errors vs. unclear requirements</b> (this is really great to be able to collect; with our company so new and small, we can introduce this and <b>use</b> it without ruffling a lot of feathers)</li>
</ul>
</p>
<p>
The tricky thing about metrics is that they are not terribly meaningful by themselves; rather they indicate areas for focussed investigation.  For example, if it takes an average of 1 day to resolve a ticket, but 3 days to test and close it, we don&#8217;t just conclude that testing is inefficient; we have to investigate why.  Perhaps we don&#8217;t have enough testers.  Perhaps our testing environment isn&#8217;t stable enough.  Perhaps there are too many show-stoppers that put the testers on the bench while developers are fixing them.
</p>
<p>
Another way to interpret these values is to watch them over time.  If the number of critical defects is decreasing, it stands to reason we&#8217;re doing a good job.  If the number of re-opens is increasing, we are packing too much into one iteration and possibly not doing sufficient requirements analysis.  We <b>just</b> started collecting these on the most recent iteration, so in the coming months, it will be pretty cool to see what happens.
</p>
<p>
These metrics are pretty basic, but it&#8217;s great to be collecting them.  The one thing that can make hard-core analysis of these numbers (esp. over time as the team grows and new projects are created) is the lack of normalization.  If we introduced twice as many critical bugs this iteration than last, are we necessarily &#8220;doing worse&#8221;?  What if the requirements were more complex, or the code required was just&#8230;bigger?</p>
<p>
Normalizing factors like cyclomatic complexity, lines of code, etc, can shed some more light on these questions.  These normalizing factors aren&#8217;t always popular, but interpreted the right way, could be very informative.  We&#8217;re the same team, using the same language, working on the same product.  If iteration 14 adds 400 lines of code, with 3 critical bugs, but iteration 15 adds 800 lines of code with 4 critical bugs, I think we can draw some real conclusions (i.e. we&#8217;re getting better).  
</p>
<p>
Another interesting bit of data would be to incorporate our weekly code review.  We typically review fresh-but-not-too-fresh code, mostly for knowledge sharing and general &#8220;architectural consistency&#8221;.  If we were to actively review code in development, before it is sent to testing, we could then have real data on the effectiveness of our code reviews.  Are we finding lots of coding errors at testing time?  Maybe more code reviews would help?  Are we finding fewer critical bugs in iteration 25, than in iteration 24 and 23, where we weren&#8217;t doing reviews?  Reviews helped a lot.
</p>
<p>
These are actually really simple things to do (especially with a small, cohesive team), and can shed real light on the development process.  What else can be done?
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/20/stand-while-you-work.html">Stand While You Work!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-20T00:00:00-04:00" pubdate data-updated="true">Jun 20<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
After experiencing some back troubles recently, I was encouraged to work standing up.  The pain relief was immediate, and for the past several months, it&#8217;s been great.  I work most of the time standing, sitting for a few minutes if I get a bit tired.  Not only is this great for my back, but it ensures I don&#8217;t work insane hours&#8230;I simply can&#8217;t stand for more than 8 hours a day.  When I first brought the subject of standing up with my company&#8217;s office manager, she was open to whatever I wanted to do; I figured since it&#8217;s my issue to solve (and since I wasn&#8217;t yet sold on the idea), I&#8217;d make do with something and bring it in.
</p>
<p>
While Joel Spolsky outfits his offices with <a href="http://www.joelonsoftware.com/items/2008/06/06.html">super fancy motorized</a> desks that can go from standing to sitting with the flick of a switch, those desks were <b>way</b> out of my price range.  Further, fixed height desks were also quite expensive (much like the word &#8220;wedding&#8221;, attaching the word &#8220;ergonominc&#8221; to something seems to double its price).  Enter the <a href="http://www.ikea.com/us/en/catalog/products/S49843462">Ikea Utby</a>!  The perfect size and perfect height, it looks great and was under $200!
</p>
<img style="margin: 5px" src="http://farm3.static.flickr.com/2451/3650774505_0354e3c061_m.jpg" height="200" align="left"/> 
<p>
Some might think it&#8217;s a bit small, but I find the more space I have, the bigger mess I make.  The Utby is, for me, the perfect amount of space.  Though, it&#8217;s so cheap, you could get two of them and make an awesome corner desk.  I work from home on occasion and also work on side projects after work.  Until recently I enjoyed the venerable (and, sadly, discontinued), <a href="http://adam.pra.to/content/jerker/">Ikea Jerker</a>. Last week, however, I was home recovering from back surgery, and was forbade by the doctor from sitting down.  I had to use my own makeshift stand up desk out of a keyboard stand and ironing board.  Pretty ghetto.
<img style="margin: 5px" src="http://farm4.static.flickr.com/3616/3650774551_1842148101_m.jpg" height="200" align="right" /></p>
<p>
So, the Jerker is now in pieces and has been replaced by a second Utby at home.<a href="http://www.flickr.com/photos/davetron5000/3643630703/"><img style="margin: 5px" src="http://farm4.static.flickr.com/3313/3643630703_b3e58ae5ae_m.jpg" align="left" border="0"/></a>  The sitting problem, both at home and at work is simple: a bar chair.  I&#8217;ve got some plush comfy ones at home and bought a (reasonably) cheap <a href="http://www.ikea.com/us/en/catalog/products/S49850179">Henriksdal</a> for work.  So, for less than $300, I have a nice looking desk at which I can stand or sit, and should have continued good back health.  Even if you don&#8217;t have back problems, I highly recommend standing; it keeps me alert and focused and feels great.  You just have to make sure you have comfortable shoes.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/05/25/lead-or-bleed.html">Lead or Bleed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-25T00:00:00-04:00" pubdate data-updated="true">May 25<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
After reading all of <a href="http://pragprog.com/titles/cfcar2/the-passionate-programmer">The Passionate Programmer</a> over a week or so, I&#8217;m going back through and looking at some of the &#8220;Act On It!&#8221; sections, where Chad Fowler recommends specific actions to kickstart/sustain/boost your career.  The very first one, titled &#8220;Lead or Bleed?&#8221; suggests making a map of technologies, with &#8220;on the way out&#8221; on the left side and &#8220;bleeding edge&#8221; on the right side, then highlighting how well you know each thing.  Here&#8217;s my stab at it:
</p>
<p>
<img src="http://www.naildrivin5.com/daveblog5000/wp-content/technologies.png" alt="Technololgies: Lead or Bleed" title="Technololgies: Lead or Bleed" width="610" height="557" class="alignnone size-full wp-image-135" />
</p>
<p>
Green are things are know really well; yellow are things I could do at a job but am by no means an expert.
</p>
<p>
Obviously this is shaped by my own reality and what I perceive on the &#8216;net, and I omitted things like &#8220;C&#8221;, &#8220;UNIX&#8221; and &#8220;Windows&#8221;, because those are not really &#8220;on the way out&#8221; in the same way that C++ is (or that COBOL was, etc.). 
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/05/21/learning-cucumber-with-dynamic-types-must-come-documentation.html">Learning Cucumber - With Dynamic Types Must Come Documentation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-21T00:00:00-04:00" pubdate data-updated="true">May 21<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Finally pulled the trigger on <a href="http://www.cukes.info">Cucumber</a>, which allows one to write human-readable &#8220;features&#8221; that are essentially acceptance test cases.  You can then execute them by adding some glue code in a mish-mash of Ruby DSLs and verify functionality.
</p>
<p>
It took me quite a while to decide to get going on this because the examples and documentation that are available are extremely hypothetical and very hand-wavy.  A lot of the information glosses over the fact that you are <b>still writing code</b> and you still need to know <b>what the keywords are</b> and <b>what data you will be given</b>.   Arcane non-human-readable symbols are almost preferable when getting started, because you don&#8217;t get distracted by English.  This is why Applescript drives me insane.
</p>
<p>
At any rate, I found <a href="http://themomorohoax.com/2009/03/08/rails-machinist-tutorial-machinist-with-cucumber-in-10-minutes">this page</a>, which was pretty helpful.  It shows testing a rails app using, among other things, <a href="http://github.com/brynary/webrat/tree/master">webrat</a> (another tool severely lacking in documentation but that is, nonetheless, pretty awesome).
</p>
<p>I&#8217;m writing a basic wiki (for science) and so I thought a good feature would be &#8220;home page shows all pages in sorted order&#8221;, so I wrote it up:
<div>
  <pre>
    <code class='ruby'>Feature: pages are sorted
 As anyone
 The pages should be listed on the home page in sorted order

 Scenario: Visit Homepage
   As anyone
   When I visit the homepage
   Then The list of pages should be sorted</code>
  </pre>
</div>

Now, the webrat/cucumber integration provided by rails means that the &#8220;plain English&#8221; has to actually conform to a subset of phrasing and terminology or you have to write the steps yourself (the features are everything under &#8220;Scenario&#8221;).  It&#8217;s not hard to do that, and it&#8217;s not hard to modify the default webrat steps, but it was a distraction intially.
</p>
<p>
Next up, you implement the steps and here is where the crazy intersection of Ruby DSLs really made things difficult.  The first two steps were pretty easy (&#8220;anyone&#8221; didn&#8217;t require any setup, and webrat successfully handled &#8220;When I visit the homepage&#8221;):
<div>
  <pre>
    <code class='ruby'>Then /The list of pages should be sorted/ do
  response.should # I have no clue wtf to do here
end</code>
  </pre>
</div>

A <tt>puts response.class</tt> and a puts <tt>response.methods</tt> gave me no useful information.  I eventually deduced that since Cucumber is a successor/add-on/something to RSpec, perhaps <tt>should</tt> comes from RSpec.  This takes a <tt>Matcher</tt> and webrat provides many.  Specifically, <tt>have_selector</tt> is available that allows selecting HTML elements based on the DOM.
<div>
  <pre>
    <code class='ruby'>Then /The list of pages should be sorted/ do
  response.should have_selector(&quot;ul.pages&quot;)
end</code>
  </pre>
</div>

<b>Success!</b> (sort of).  My feature executing is all green, meaning the home page contains &lt;ul class=&#8221;pages&#8221;&gt;.  <tt>have_selector</tt> also takes a block (totally undocumented as to what it is or does in the webrat documentation):
<div>
  <pre>
    <code class='ruby'>Then /The list of pages should be sorted/ do
  response.should have_selector(&quot;ul.pages&quot;) do |pages|
    # WTF is pages and what can I do with it?
  end
end</code>
  </pre>
</div>

A <tt>puts pages.class</tt> later and I realize this is a Nokogiri <tt>NodeSet</tt>.    Now, I&#8217;m in business, though it would&#8217;ve been nice to be told WTF some of this stuff was and what I can/should do with it.  At this point it was pretty trivial to select the page names from my HTML and check if they are sorted:
<div>
  <pre>
    <code class='ruby'>response.should have_selector('ul.pages') do |pages|
   page_names = []
   pages.should have_selector('li') do |li|
     li.should have_selector('.pagename') do |name|
       name.each do |one_name|
         page_names &amp;lt;&amp;gt; one_name.content
       end
     end
   end
   assert_equal page_names,page_names.sort
   true
 end</code>
  </pre>
</div>

(For some reason <tt>assert_equal</tt> doesn&#8217;t evaluate to true when it succeeds and the block evaluates to false and then Cucumber/RSpec/Webrat/Ruby Gods claim my page is missing the <tt>ul</tt> tag).  My initial implementation walked the DOM using Nokogiri&#8217;s  API directly, because I didn&#8217;t realize that <tt>should</tt> had been mixed in (on?) to the objects I was being given.  I&#8217;m still not sure if using that is the intention, but it seemed a bit cleaner to me.
</p>
<p>
So, this took me a couple of hours, mostly  because of a combination of dynamic typing and lack of documentation.  I&#8217;m all for dynamic typing, and I totally realize that these are free tools and all that.  I think if the Ruby community (and the dynamic typing community in general) wants to succeed and make a case that dynamic typing, DSLs, meta-programming and all this (admittedly awesome and powerful) stuff enhance productivity, there <b>has to be documentation</b> as to the types of user-facing objects. 
</p>
<p>
Now, given <a href="http://www.github.com">Github</a>&#8217;s general awesomeness, I&#8217;m totally willing to fork a repo, beef up the rdoc and request a pull, however I&#8217;m not even sure <b>whose</b> RDoc I could update to make this clear.  Just figuring out that the <tt>have_selector</tt> in <tt>response.should have_selector</tt> is part of webrat was nontrivial (I had to just guess that <tt>should</tt> was part of RSpec and that the <tt>Webrat::Matchers</tt> module was mixed in).  This is a problem and it&#8217;s not clear to me how to solve it.
</p>
<p>
That being said, I was then able to create three more features using this system in about 10 minutes, so overall, I&#8217;m really happy with how things are working.  Certainly if this were Java, I&#8217;d still be feeding XML to maven or futzing with missing semicolons.  So, it&#8217;s a net win for me.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/05/13/why-maven-drives-me-absolutely-batty.html">Why Maven Drives Me Absolutely Batty</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-13T00:00:00-04:00" pubdate data-updated="true">May 13<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Although my <a href="http://softwarefail.tumblr.com/tagged/maven">maven bitching</a> has been mostly snarky, I have come to truly believe it is the wrong tool for a growing enterprise and, like centralized version control, will lead to a situation where tools dictate process (and design).
</p>
<p>
But, what is maven actually good at?
<ul>
<li>Maven is great for getting started &#8211; you don&#8217;t have author an ant file (or copy one from an existing project)</li>
<li>Maven is great for enforcing a standard project structure &#8211; if you always use maven, your projects always look the same</li>
</ul>
This is about where it ends for me; everything else maven does - manage dependencies, automated process, etc., is done much better and much more quickly by other technology.  It&#8217;s pretty amazing that someone can make a tool worse than ant, but maven is surely it
</p>
<h4>Dependency management is not a build step</h4>
<p>
Maven is the equivalent of doing a <tt>sudo gem update</tt> everytime you call <tt>rake</tt>, or doing a <tt>sudo yum update</tt> before running <tt>make</tt>.  That&#8217;s just insane.  While automated dependency management is a key feature of a sophisticated development process, this is <b>a separate process</b> from developing my application.
</p>
<h4>Maven&#8217;s configuration is incredibly verbose</h4>
<p>It requires <b>36 lines</b> of human-readable XML to have my webapp run during integration tests. <b>Thirty Six</b>!  It requires <b>six lines</b> just to state a dependency.  Examining a maven file and tying to figure out where you are in its insane hierarchy is quite difficult.  It&#8217;s been pretty well-established outside the Java community that XML is horrible configuration file format; formats like YAML have a higher signal to noise ration, and using (gasp) actual scripting language code can be even more compact (and readable and maintainable).
</p>
<h4>The jars you use are at the mercy of Maven</h4>
<p>
If you want to use a third-party library, and maven doesn&#8217;t provide it (or doesn&#8217;t provide the version you need), you have to set up your own maven repo.  You then have to include that repo in your pom file, or in every single developer&#8217;s local maven settings.  If you secure your repo?  More XML configuration (and, until the most recent version, you had to have your password in cleartext&#8230;<b>in a version 2 application</b>).  The fallout here is that you will tend to stick with the versions available publicly, and we see how well that worked out for Debian.
</p>
<h4>Modifying default behavior is very difficult</h4>
<p>
Since maven is essentially a very, very high-level abstraction, you are the mercy of the plugin developers as to what you can do.  For example, it is not possible to run your integration tests through Cobertura.  The plugin developers didn&#8217;t provide this and there&#8217;s no way to do it without some major hacking of your test code organization and pom file.  This is bending your process to fit a tool&#8217;s shortcoming.  This is limitation designed into maven. This is fundamentally different that &#8220;opinionated software&#8221; like Rails; Rails doesn&#8217;t punish you so harshly for wanting to tweak things; maven makes it very difficult (or impossible).  There was no thought given in Maven&#8217;s design to using non-default behavior.
</p>
<h4>Extending Maven requires learning a plugin API</h4>
<p>While you can throw in random Ant code into maven, the only way to create re-usable functionality is to learn a complex <a href="http://www.sonatype.com/books/maven-book/reference/writing-plugins-sect-custom-plugin.html">plugin API</a>.  Granted, this isn&#8217;t complex like J2EE is complex, but for <b>scripting a build</b>, it&#8217;s rather ludicrous.</p>
<h4>Maven is hard to understand</h4>
<p>
I would be willing to bet that every one of my gripes is addressed through some crazy incantation.  But that&#8217;s not good enough.  The combined experience of the 7 developers at my company is about 70 years and not <b>one</b> of us can explain maven&#8217;s phases, identify the available targets, or successfully add new functionality for a pom without at least an hour on the net and maven&#8217;s documentation.</p>
<p> A great example is the release plugin.  All five developers here that have used it go through the same cycle of having no idea what it&#8217;s doing,  having it fail with a baffling error message, starting over and finally figuring out the one environment tweak that makes it work.  At the end of this journey each one (myself included) has realized all this is a HUGE wrapper around <tt>scp</tt> and a few <tt>svn</tt> commands. Running two commands to do a source code tag and artifact copy shouldn&#8217;t be this difficult.
</p>
<h4>Maven&#8217;s command line output is a straight-up lie</h4>
<p>
<div>
  <pre>
    <code class='java'>[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure</code>
  </pre>
</div>

&#8220;Compilation failure&#8221;, but it&#8217;s own definition is a failure and therefore an error (not an informational message).  Further, most build failures do not exit with nonzero.  This makes maven <b>completely unscriptable</b>.
</p>
<h4>Maven doesn&#8217;t solve the problems of make</h4>
<p>
Ant&#8217;s whole reason for being is &#8220;tabs are evil&#8221;, and that tells you something.  While maven&#8217;s description of itself is <a href="https://twitter.com/davetron5000/status/1656171374">a complete fabrication</a>, it at least has its heart in the right place.  However, it STILL fails to solve make&#8217;s shortcomings wrt to java:
<ul>
<li>Maven doesn&#8217;t recompile the java classes that are truly out-of-date</li>
<li>Maven recompiles  java classes that are <b>not</b> out-of-date</li>
<li>Maven doesn&#8217;t allow for sophisiticated behavior through scripting</li>
<li>Maven replaces arcane magic symbols with arcane magic nested XML (e.g. pom files aren&#8217;t more readable than a Makefile)</li>
</ul>
</p>
<h4>Maven is slow</h4>
My test/debug cycle is around a minute.  It should be 5 seconds (and it shouldn&#8217;t require an IDE).
<h4>Conclusion</h4>
<p>
Apache&#8217;s Ivy + Ant is probably a better environment than maven for getting things done; a bit of up-front work is required, but it&#8217;s not an ongoing cost, and maintenance is much simpler and more straightforward.  Tools like <a href="http://buildr.apache.org/">Buildr</a> and <a href="http://raven.rubyforge.org/">Raven</a> seem promising, but it might be like discussing the best braking system for a horse-drawn carriage; utterly futile and irrelevant.  
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/04/28/git-workflow-with-svn.html">Git Workflow With SVN</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-28T00:00:00-04:00" pubdate data-updated="true">Apr 28<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The best way to get started with Git <b>and</b> have a better experience at work if you have to use SVN is to use <tt>git svn</tt> as a client to Subversion.  You can take advantage of <a href="http://whygitisbetterthanx.com/">Git&#8217;s awesomeness</a> while not requiring your team or infrastructure to change immediately.
</p>
<h3>Setup</h3>
<tt>git svn clone -t tags -T trunk -b branches svn+ssh://your.svn.com/path/to/svn/root</tt>
(This may take a while for a large or old svn repo)
<h3>Working on Trunk</h3>
The initial clone should leave you on git&#8217;s <tt>master</tt> branch, which is connected to svn&#8217;s trunk.
<ol>
<li><tt>git svn rebase</tt> <i># Optional: only if you want to get work from svn; you don&#8217;t have to</i></li>
<li>Hack some code</li>
<li><tt>git add any new files you created.txt</tt></li>
<li><tt>git commit -a</tt></li>
<li>Repeat from step 2 until done</li>
</ol>
<h3>Sharing Your Changes</h3>
You will rebase your changes against&#8217;s SVN&#8217;s (this means git will pretend you made all your changes from SVN&#8217;s current HEAD, not the HEAD you started with [you do this to avoid conflicts and merges, which SVN cannot handle]).
<ol>
<li><tt>git svn rebase</tt></li>
<li><tt>git svn dcommit</tt></li>
</ol>
<h4>If you got Conflicts</h4>
<ol>
<li>Git will tell you about them, so go and resolve them</li>
<li>For each file you had to resolve, <tt>git add the_filename</tt>
<li><tt>git rebase &#8211;continue</tt></li>
<li>Repeat until done</li>
</ol>
<h3>Working with SVN&#8217;s branches</h3>
Suppose you need to do some work on a branch called <tt>1.3.x</tt> in your SVN repo:
<ol>
<li><tt>git svn fetch</tt> <i># This updates your local copy of remote branches</i></li>
<li><tt>git checkout 1.3.x</tt># This checks out a remote branch, which you shouldn&#8217;t work directly on</i></li>
<li><tt>git checkout -b 1.3.x-branch</tt> <i># This creates a local branch you can work on, based on the remote 1.3.x branch</i></li>
<li>Hack some code</li>
<li><tt>git add</tt> and <tt>git commit -a</tt> as needed</li>
<li>Follow same procedure as above for Sharing Your Changes.  Git will send your changes to the 1.3.x branch in SVN and not the trunk</li>
</ol>
<h3>Merging the Changes You Made</h3>
Due to the way git interacts with SVN, you shouldn&#8217;t automatically just merge your branch work onto the trunk.  This may create strange histories in SVN.
<h3>So What?</h3>
So, this isn&#8217;t buying you much more than you get with SVN.  Yes, when you <tt>git checkout 1.3.x-branch</tt> it&#8217;s lightning fast, and you can work offline.  Here&#8217;s a few things that happen to me all the time that would be difficult or impossible to do without Git.
<h4>Gotta Fix a Bug Real Quicklike</h4>
You are in the middle of working on a new feature and you need to to push out a bugfix in production code.  Your in-development code can&#8217;t be checked into trunk:
<ol>
<li><tt>git stash</tt></li>
<li><tt>git checkout production-branch-name</tt></li>
<li><tt>git checkout -b bugfix-xyz</tt></li>
<li>Fix bugs</li>
<li><tt>git commit -a</tt></li>
<li><tt>git svn dcommit</tt></li>
<li><tt>git checkout master</tt></li>
<li><tt>git stash apply</tt></li>
</ol>
You are now back where you started, without a fake revision just to hold your code and you didn&#8217;t have to go checkout the branch elsewhere.
<h4>Can&#8217;t commit to SVN due to a release</h4>
Often, teams restrict commit access to SVN while a release is being prepared.  If the team is releasing version 1.5 and I&#8217;m working on 1.6 features, there can be some period of time where I&#8217;m not supposed to commit, because the 1.5 release is being prepared and under feature freeze.
<ol>
<li><tt>git commit -a</tt></li>
<li>Continuing working</li>
</ol>
When feature freeze is over, then I&#8217;ll <tt>git svn dcommit</tt> to send my changes to the SVN server
<h4>Blocked on Feature X, Want to work on Feature Y</h4>
This happens to me quite frequently:  I&#8217;m slated to work on a few features that aren&#8217;t interdependent.  I start hacking away on Feature X and hit a roadblock and can&#8217;t continue working.  I&#8217;ve got a half-implemented feature and I can&#8217;t make any forward motion until a meeting next week.  Feature Y, on the other hand, is ready to go.  This requires some planning ahead:
<ol>
<li><tt>git checkout master</tt></li>
<li><tt>git checkout -b feature-X</tt></li>
<li>Work on Feature X</li>
<li><tt>git commit -a</tt> etc. as I work</li>
<li>Get blocked; meeting next week.  D&#8217;oh!</li>
<li><tt>git checkout master</tt></li>
<li><tt>git checkout -b feature-Y</tt></li>
<li>Work on Feature Y</li>
</ol>

At this point, X and Y are on two local branches and I can switch back and forth as needed.  Don&#8217;t underestimate how powerful this is, especially when you have certain features that are priorities, but can become blocked frequently.  I can now easily put aside Feature Y once I have my meeting and start back up on Feature X.  When I&#8217;m done, I <tt>git merge</tt> everything back to master and <tt>dcommit</tt> to SVN.
<h4>Type your log message, save it, realize you forgot to reference a bug ticket #</h4>
You have a bug tracker set up that links tickets and revisions; all you have to do is put the ticket # in your log message.  It&#8217;s a nice feature, but I forget to do it frequently.  As long as you haven&#8217;t done <tt>git svn dcommit</tt>, you can fix this:
<ol>
<li><tt>git commit &#8211;amend</tt></li>
</ol>
Your editor will pop up and you can change the log message!  Awesome.
<h3>Advanced Stuff</h3>

Once you get used to this, you will feel more comfortable doing some more advanced things.  

<h4>Topic Branches</h4>
The most obviously beneficial was touched on above, but it boils down to: <b>make every new feature on its own branch</b>.  This means you <b>never work on master</b> and you <b>never work on an SVN branch</b>.  Those are only for assembling what you will send to SVN.  This gives incredible flexibility to work on code when its convenient and not worry about checking in bad things.  Git calls this <i>topic branches</i>.

<h4>Save your Experiments</h4>
If you do everything on a branch, you don&#8217;t have to delete your work, ever.  You can go back and revisit experiments, or work on low-priority features over a long period of time with all the advantages of version control, but without the baggage of remote branches you have to share with the world.

<h4>Cherry Pick</h4>
With Git, you typically commit frequently and you restrict the scope of each revision.  A commit in git is more like a checkpoint, and a push in  Git is more like a commit in SVN.  So, commit in git like crazy.  What this lets you do is move diffs around.  On several occasions, I&#8217;ve had some code on a branch that I needed to use, but didn&#8217;t want to pull in the entire branch.  <tt>git cherry-pick</tt> lets me do that.

<h4>Mindlessly Backup Your Repo</h4>

<ol>
<li><tt>ssh your_user@some.other.box.com</tt></li>
<li><tt>mkdir awesome_project</tt></li>
<li><tt>cd awesome_project</tt></li>
<li><tt>git init</tt></li>
<li><tt>exit</tt></li>
<li><tt>git remote add other-box your_user@some.other.box.com:/home/chrisb/awesome_project</tt></li>
<li><tt>git push &#8211;all other-box</tt></li>
<li><tt>echo &#8220;git push &#8211;force &#8211;all other-box&#8221; > .git/hooks/post-commit && chmod +x .git/hooks/post-commit</tt></li>
</ol>
You now will back up your repository on every commit to the other box.  Or, use <a href="http://www.github.com">GitHub</a>!

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/17/mustbecompliant.html">REST Compliance Officer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-17T00:00:00-04:00" pubdate data-updated="true">Mar 17<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>With regard to <a href="http://www.jroller.com/Solomon/entry/the_road_to_real_rest">this blog on REST compliance</a>
<p>
<blockquote>
<b>Me:</b> The Gliffy API is RESTFul<br />
<b>REST Compliance Officer:</b> Does a &#8220;PUT&#8221; update the data at the given URL?<br />
<b>Me:</b> Yes.<br />
<b>RCO:</b> Trick Question!  It&#8217;s &#8220;URI&#8221;.  Is the only way to create a new resource done with a &#8220;POST&#8221;?<br />
<b>Me:</b> Yes.<br />
<b>RCO:</b> Is there exactly one endpoint, from which any and all resource locators are discoverable?<br />
<b>Me:</b> Um, no, that puts undue burden on the client libraries, and over-complicates what we were trying to accomp&#8230;.<br />
<b>RCO:</b> <i>YOU ARE NOT RESTFUL!  READ FIELDING&#8217;S DISSERTATION, THE HTTP SPEC AND IMPLEMENT AN RFC-COMPLIANT URI  PARSER IN THREE DIFFERENT LANGUAGES.  NEXT!</i>
</blockquote>
</p>
<p>
Thank GODS that REST doesn&#8217;t have a spec.  If it did, it would still be in development.
</p>
<hr />
<p>
P.S. If you are going to coin a term and you want to <a href="http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven">bitch about it being misused</a>, maybe calling it a &#8220;style&#8221; isn&#8217;t the best idea.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/03/11/java-annotations-javas-love-of-configuration-over-convention.html">Java Annotations - Java&#8217;s Love of Configuration Over Convention</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-11T00:00:00-04:00" pubdate data-updated="true">Mar 11<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the beginning, EJB was a bloated mess of XML configuration files that allowed some sort of ultimate flexibility that absolutely no one needed nor cared about.  And it sucked.  So developers started using conventions to keep track of the four classes required to make a remote method call, and XDoclet was created to automate the creation of the XML configuration files.  And it sucked less.  Following in EJB&#8217;s footsteps, Hibernate did the same thing.  And XDoclet followed.  And it still sucked. 
</p>
<p>
So, annotations were created to essentially formalize what XDoclet was doing, instead of considering how horribly broken the implementation of J2EE or Hibernate was.  And now that we have annotations, the &#8220;implementation pattern&#8221; of &#8220;ultimate flexibility through annotations&#8221; has made its way into numerous Java frameworks, such as JAX-RS and JPA.</p>
<p>
Regarding JPA:
<div>
  <pre>
    <code class='java'>@Id
@GeneratedValue
@Column(name=&quot;person_id&quot;)
public int getPersonId() { return personId; }</code>
  </pre>
</div>

This is not a significant improvement over XDoclet; the only benefit is if you mistype &#8220;GeneratedValue&#8221;, the compiler will catch it.  I shouldn&#8217;t have to type &#8220;GeneratedValue&#8221; in the first place.  Unless I&#8217;m doing something non-standard.  Which I almost never do.
</p>
<p>
I have a <tt>Person</tt> class with a <tt>getPersonId</tt> method.  Can JPA just assume that it maps to the <tt>PERSON</tt> table, and the <tt>PERSON_ID</tt>, respectively.  Further, couldn&#8217;t it figure out that it&#8217;s the auto-generated primary key since the schema says <tt>primary key auto increment</tt>.  All the information is there and available to the framework to figure this out.
</p>
<p>
The same goes for EJB.  I have a class named <tt>FooStatelessBean</tt>.  How about we assume it&#8217;s a stateless session bean, and it&#8217;s interface is defined by its public methods?  It can then provide <tt>FooRemote</tt> and <tt>FooLocal</tt> for me, and I don&#8217;t need to configure anything or keep three classes in sync.
</p>
<p>
Just because Java doesn&#8217;t have all the Ruby dynamic magic doesn&#8217;t mean we can&#8217;t make things easy.  In reading <a href="http://www.suryasuravarapu.com/2009/03/rest-crud-with-jax-rs-jersey.html">Surya Suravarapuâ€™s blog post about CRUD via JAX-RS</a> I can&#8217;t help wondering why it takes so much code to call a few methods on a class?
</p>
<p>
Did the designers of JAX-RS not even <b>look</b> at how Rails does things?  I get a <tt>PUT</tt> to the url <tt>/customers/45</tt>.  We should default to calling <tt>put(45)</tt> on the class <tt>CustomersResource</tt>.  Only if I want to obfuscate what&#8217;s going (e.g. by having <tt>FooBar.frobnosticate()</tt> handle the request) should I be required to provide configuration.</p>
<p>Even in Surya&#8217;s example code, he&#8217;s following some conventions: His resource class is suffixed with <tt>Resource</tt> and his <tt>POST</tt> method is prefixed <tt>add</tt>.  This should be baked into the spec.  It&#8217;s like EJB all over again with the common conventions that aren&#8217;t supported by the framework because of too much useless flexibilty.
</p>
<p>
Supporting convention over configuration is easy in Java.  In just a few hours, <a href="http://github.com/davetron5000/fwf/tree/master">I had a tiny web framework</a> that proves it<sup>1</sup>.  It wouldn&#8217;t take much more effort to allow the default behavior to be overridden, but, unlike JAX-RS, EJB, or even the Servlet spec itself, it doesn&#8217;t punish developers who follow conventions.  It makes their lives easier and thus encourages good behavior.
</p>
<p>
So, the point of all this is that annotations encourage bad framework design; unnecessary configuration is a major part of many Java frameworks and specs.  And I have no idea why.
</p>
<hr />
<p>
<i><sup>1</sup>it unfortunately breaks down at the UI layer, due to a statically typed and compiled language not being a great choice for implementing web UIs, but that&#8217;s another issue.</i>
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/02/05/git-github-forking-the-new-hotness.html">Git, GitHub, Forking: The New Hotness</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-05T00:00:00-05:00" pubdate data-updated="true">Feb 5<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content">While working on my <a href="http://davetron5000.github.com/gliffy">Gliffy Ruby Client</a>, I decided I wanted a better way to describe the command line interface.  Finding nothing that was any good, I whipped up <a href="http://davetron5000.github.com/gli">GLI</a> and refactored my Giffy command line client to use it.  While doing <b>that</b>, I finally got annoyed at <a href="http://github.com/technoweenie">technoweenie&#8217;s</a> version of rest-client, and also noticed that <a href="http://github.com/adamwiggins/rest-client/tree/master">the original author&#8217;s</a> had totally changed interfaces.  So, clicked the nice &#8220;Fork&#8221; button on GitHub to get my own copy and fixed the issues.  But that&#8217;s not the cool part.  The cool part is that I can change my Gliffy gem to depend on <b>my</b> rest-client implementation and, viola!  No special instructions, no hacks, no nothing.  This is a really cool thing that would be difficult with Subversion, impossible without RubyGems, and downright painful without <a href="http://www.github.com">GitHub</a>.
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/8/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>
  <img class="left" src="http://www.gravatar.com/avatar/ae52d95bbc43d0a62044a9a6b5674de0.png">
  I&#8217;ve been a progammer since 1995.  Currently use Ruby and Scala.
  I also write, play bass, and cook.
  </p>
</section>
<section>
  <p>
  <a href="http://pragprog.com/book/dccar/build-awesome-command-line-applications-in-ruby"><img class="center" src="http://imagery.pragprog.com/products/249/dccar_xlargebeta.jpg?1319573406"></a>
  </p>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/davetron5000">@davetron5000</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'davetron5000',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("davetron5000", 5, true);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/davetron5000" class="twitter-follow-button" data-show-count="false">Follow @davetron5000</a>
  
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/07/29/six-languages-to-master.html">&dagger; Six languages to master</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/25/a-world-without-nil.html">&#10106;&#10144; A world without nil</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/19/slides-from-my-oscon-talk.html">&dagger; Slides from my OSCON talk</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/17/adventures-in-functional-programming-with-ruby.html">&#10106;&#10144; Adventures in functional programming with Ruby</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/27/what-is-better-code.html">&#10106;&#10144; What is &#8216;better&#8217; code?</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - David Bryant Copeland -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
